import{_ as a,c as n,o as e,a2 as l}from"./chunks/framework.9Uv4PgnO.js";const D=JSON.parse('{"title":"Webflo","description":"","frontmatter":{},"headers":[],"relativePath":"-/docs.old.md","filePath":"-/docs.old.md"}'),o={name:"-/docs.old.md"};function t(p,s,c,r,i,y){return e(),n("div",null,[...s[0]||(s[0]=[l(`<h1 id="webflo" tabindex="-1">Webflo <a class="header-anchor" href="#webflo" aria-label="Permalink to &quot;Webflo&quot;">‚Äã</a></h1><p><span class="badge-npmversion"><a href="https://npmjs.org/package/@webqit/webflo" title="View this project on NPM"><img src="https://img.shields.io/npm/v/@webqit/webflo.svg" alt="NPM version"></a></span></p><p>Webflo is a universal <em>web</em>, <em>mobile</em>, and <em>API backend</em> framework based on vanilla HTML, CSS, and JavaScript! It&#39;s a powerful little thing written to facilitate building more authentic, web-native applications!</p><p>Here, we&#39;ve put all of that up for a 20mins straight read!</p><h2 id="documentation" tabindex="-1">Documentation <a class="header-anchor" href="#documentation" aria-label="Permalink to &quot;Documentation&quot;">‚Äã</a></h2><p>(A bit of a long read!)</p><ul><li><a href="#overview">Overview</a></li><li><a href="#installation">Installation</a></li><li><a href="#concepts">Concepts</a><ul><li><a href="#handler-functions-and-layout">Handler Functions and Layout</a></li><li><a href="#step-functions-and-pipelines">Step Functions and Routing Pipelines</a></li><li><a href="#pages-layout-and-templating">Pages, Layout and Templating</a></li><li><a href="#client-and-server-side-rendering">Client and Server-Side Rendering</a></li><li><a href="#requests-and-responses">Requests and Responses</a></li></ul></li><li><a href="#webflo-applications">Webflo Applications</a><ul><li><a href="#client-side-applications">Client-Side Applications</a></li><li><a href="#progressive-web-apps">Progressive Web Apps</a></li><li><a href="#api-backends">API Backends</a></li><li><a href="#static-sites">Static Sites</a></li></ul></li><li><a href="#webflo-config">Webflo Config</a></li><li><a href="#webflo-tooling">Webflo Tooling</a><ul><li><a href="#oohtml">OOHTML</a></li><li><a href="#oohtml-ssr">OOHTML SSR</a></li><li><a href="#oohtml-cli">OOHTML CLI</a></li><li><a href="#the-observer-api">The Observer API</a></li></ul></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#getting-involved">Getting Involved</a></li></ul><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><details><summary><b>Build <i>anything</i></b> - from as basic as a static <code>index.html</code> page to as rich as a <i>Multi Page Application (MPA)</i>, or <i>Single Page Application (SPA)</i>, or a hybrid of both, implementing <i>Server Side Rendering (SSR)</i>, <i>Client Side Rendering (CSR)</i>, or a hybrid of both, having offline and <i>PWA</i> capabilities, etc. - this time, <i>without loosing the vanilla advantage</i>! </summary><p>Here&#39;s a glimpse of your Webflo app.</p><p>For when your application is a static site, or has static files to serve:</p><ul><li><p>The <code>public</code> directory for static files.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/index.html</span><span style="color:#C3E88D;"> -----------------</span><span style="color:#C3E88D;"> http://localhost:3000/index.html</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> http://localhost:3000</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/logo.png</span><span style="color:#C3E88D;"> -------------------</span><span style="color:#C3E88D;"> http://localhost:3000/logo.png</span></span></code></pre></div></li></ul><p>For when your application requires dynamic request handling on the server:</p><ul><li><p>The <code>server</code> directory for server-side routing.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span></span></code></pre></div><p>In which case a typical <code>index.js</code> route handler has the following anatomy:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">  // &lt;--------------------------------- http://localhost:3000/logo.png (or other non-root URLs)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Hello from Server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span><span style="color:#676E95;font-style:italic;">  // &lt;------------- http://localhost:3000/ (root URL)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>In which case data is returned either as a JSON (API) response, or as a rendered page response where there is an <code>index.html</code> file in the <code>public</code> directory that pairs with the route.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/index.html</span></span></code></pre></div><p>In which case a typical <code>index.html</code> page has the following anatomy:</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">link</span><span style="color:#C792EA;"> rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylesheet</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/app.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span><span style="color:#676E95;font-style:italic;">   &lt;!-- ---------------------- Application CSS --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/app.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;">   &lt;!-- ----------------- Application JS bundle --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/app.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;">   &lt;!-- ------------- Reusable HTML Templates and partials (Details ahead) --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">...</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><p>For when your application requires dynamic request handling on the client (the browser):</p><ul><li><p>The <code>client</code> directory for client-side routing,</p></li><li><p>And, optionally, the <code>worker</code> directory for an all-new Service Worker based routing! (As detailed ahead.)</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> client/index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> worker/index.js</span></span></code></pre></div><p>Where in both cases, a typical <code>index.js</code> route handler has the same familiar anatomy:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">[client|worker]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">  // &lt;--------------------------------- http://localhost:3000/logo.png (or other non-root URLs)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Hello from [Browser|Worker]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span><span style="color:#676E95;font-style:italic;">  // &lt;--- http://localhost:3000/ (root URL)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ul><p>This and much more - ahead!</p></details><details><summary><b>Build <i>future-proof anything</i></b> by banking more on web standards and less on abstractions! Webflo <i>just follows</i> where a native feature, standard, or conventional HTML, CSS or JS <i>already works</i>!</summary><p>Here&#39;s a glimpse of the standards-based stack you get of Webflo!</p><p>For when your application involves routing:</p><ul><li><p><a href="https://fetch.spec.whatwg.org/" target="_blank" rel="noreferrer">The Fetch Standard</a>, comprising of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noreferrer">Request</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noreferrer">Response</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers" target="_blank" rel="noreferrer">Headers</a> interfaces - used for all things <em>requests and responses</em> - across client, server, and Service Worker environments. (<a href="#requests-and-responses">Details ahead</a>)</p><blockquote><p>This paves the way to using other native APIs as-is, when handling requests and responses. For example, if you sent an instance of the native <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noreferrer">FormData</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" target="_blank" rel="noreferrer">Blob</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank" rel="noreferrer">File</a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" target="_blank" rel="noreferrer">ReadableStream</a> object from the browser side of your application, you&#39;d be getting the equivalent instance on the server side!</p></blockquote></li><li><p><a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">WHATWG URL</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLPattern" target="_blank" rel="noreferrer">WHATWG URLPattern</a> - used for all things <em>URL</em> and <em>URL pattern matching</em>, respectively - across client, server, and Service Worker environments. (<a href="#">Details ahead</a>)</p></li></ul><p>For when your application involves pages and a UI:</p><ul><li><p><a href="https://html.spec.whatwg.org/" target="_blank" rel="noreferrer">The HTML Standard</a> - held for all things <em>markup</em> - across client, server, and Service Worker environments! You&#39;ll absolutely ‚ù§ love it that your pages and page components can live as plain <code>.html</code> files! The browser already does!</p><blockquote><p>This HTML-first approach is new! And you can get away with a &quot;zero-JavaScript&quot; proposition, or something more of a <em>Progressive Enhancement</em> proposition that makes do with &quot;just-enough JavaScript&quot;!</p></blockquote></li><li><p><a href="https://dom.spec.whatwg.org/" target="_blank" rel="noreferrer">WHATWG DOM</a> - available universally - not only on the client-side, but also on the server-side via <a href="#oohtml-ssr">OOHTML-SSR</a> - all of which lets us have <em>dynamic pages</em>.</p><blockquote><p>And you get to have <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements" target="_blank" rel="noreferrer">Custom Elements</a> as powerful building blocks.</p></blockquote></li></ul><p>Same web standards everwhere you look! You come off with a web-native app!</p></details><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">‚Äã</a></h2><p>Every Webflo project starts on an empty directory that you can create on your machine. The command below makes a new directory <code>my-app</code> from the terminal and navigates into it.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#C3E88D;"> my-app</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#C3E88D;"> my-app</span></span></code></pre></div><p>With <a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" target="_blank" rel="noreferrer">npm available on your terminal</a>, run the following command to install Webflo to your project:</p><blockquote><p>System Requirements: Node.js 18.0 (having stable Fetch API support) or later</p></blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> i</span><span style="color:#C3E88D;"> @webqit/webflo</span></span></code></pre></div><p>The installation automatically creates a <code>package.json</code> file at project root, containing <code>@webqit/webflo</code> as a project dependency.</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">dependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">@webqit/webflo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Other important definitions like project <code>name</code>, package <code>type</code>, and <em>aliases</em> for common Webflo commands will now also belong here.</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my-app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">start</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">webflo start::server --mode=dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">generate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">webflo generate::client --compression=gz --auto-embed</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">dependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">@webqit/webflo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>And that gets it all ready! The commands <code>npm start</code> and <code>npm run generate</code> will be coming in often during development.</p><h3 id="hello-world" tabindex="-1">&quot;Hello World!&quot; <a class="header-anchor" href="#hello-world" aria-label="Permalink to &quot;&quot;Hello World!&quot;&quot;">‚Äã</a></h3><p>To be sure that Webflo is listening, run <code>npx webflo help</code> on the terminal. An overview of available commands should be shown.</p><p>If you can&#39;t wait to say <em>Hello World!</em> üòÖ, you can have an HTML page say that right away!</p><ul><li><p>Create an <code>index.html</code> file in a new subdirectory <code>public</code>.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">public</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.html</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">My App</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Hello World!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">This is </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">My App</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li><li><p>Start the Webflo server and visit <code>http://localhost:3000</code> on your browser to see your page. üòÉ</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> start</span></span></code></pre></div></li><li><p>Welcome to Webflo!</p></li></ul><blockquote><p><strong>Note</strong><br>This is documentation for Webflo@0.11.x which is compatible with OOHTML@1.x. Webflo@next which is compatible with OOHTML@2.x is coming soon!</p></blockquote><h2 id="concepts" tabindex="-1">Concepts <a class="header-anchor" href="#concepts" aria-label="Permalink to &quot;Concepts&quot;">‚Äã</a></h2><ul><li><a href="#handler-functions-and-layout">Handler Functions and Layout</a></li><li><a href="#step-functions-and-pipelines">Step Functions and Routing Pipelines</a></li><li><a href="#pages-layout-and-templating">Pages, Layout and Templating</a></li><li><a href="#client-and-server-side-rendering">Client and Server-Side Rendering</a></li><li><a href="#requests-and-responses">Requests and Responses</a></li></ul><h3 id="handler-functions-and-layout" tabindex="-1">Handler Functions and Layout <a class="header-anchor" href="#handler-functions-and-layout" aria-label="Permalink to &quot;Handler Functions and Layout&quot;">‚Äã</a></h3><p>Functions come in in Webflo when you need to dynamically handle requests.</p><p>Whether building a <em>server-based</em>, <em>browser-based</em>, or <em>universal</em> application, Webflo gives you one consistent way to handle requests and navigation: using <em>handler functions</em>!</p><p>You just define an <code>index.js</code> file with a function that gets called to handle a request!</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">[server|client|worker]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> fetch</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>Functions may have a name...</summary><blockquote><p>The following function handles only <code>GET</code> requests:</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> GET</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> fetch</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><blockquote><p>Function names take after <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" target="_blank" rel="noreferrer"><em>HTTP methods</em></a>: <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code>, <code>OPTIONS</code>, <code>HEAD</code>, etc.</p></blockquote><blockquote><p>Function names are lower case for Webflo version &lt;= <code>0.11.23</code>, in which case <code>delete</code> is <code>del</code>.</p></blockquote></details><details><summary>Functions may also may be <code>async</code>...</summary><blockquote><p>The following function can simply <code>await</code> asynchronous stuff:</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> GET</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> fetch</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#BABED8;"> a</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> b</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></details><p>Each function receives an <code>event</code> object representing details about the request - e.g. <code>event.request</code>, <code>event.url</code>, <code>event.session</code>. (<a href="#pipeline-api">Details ahead</a>.)</p><p>While the <code>context</code> and <code>next</code> parameters are discussed below, <code>fetch</code> is a <a href="https://fetch.spec.whatwg.org/" target="_blank" rel="noreferrer">fetch</a>-equivalent function passed in for <em>convenience</em> - for initiating remote requests.</p><p><strong>Functions that will respond to requests on the server-side</strong> go into a directory named <code>server</code>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">        title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        source</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>The above function will respond on starting the server - <code>npm start</code> on your terminal - and visiting <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a>.</p></blockquote></details><p><strong>Funtions that will respond to requests on the client-side (from right within the browser)</strong> go into a directory named <code>client</code>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">client</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">        title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        source</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">in-browser</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>The above function is built as part of your application&#39;s client-side script from the <code>npm run generate</code> command. It is typically bundled to the file <code>./public/bundle.js</code>. And the <code>--auto-embed</code> flag in that command gets it automatically embedded on your <code>./public/index.html</code> page as <code>&lt;script type=&quot;module&quot; src=&quot;/bundle.js&quot;&gt;&lt;/script&gt;</code>. Then it responds from right in the browser on visiting <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a>.</p></blockquote></details><p>For <em>browser-based</em> applications that want to employ Service-Workers (typically, Progressive Web Apps), Webflo allows for equivalent request handlers as part of the Service Worker. These <strong>worker-based</strong> functions go into a directory named <code>worker</code>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">worker</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">        title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        source</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">service-worker</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>The above function is built as part of your application&#39;s Service Worker script from the <code>npm run generate</code> command. It is typically bundled to the file <code>./public/worker.js</code>, and the main application bundle automatically registers this as the application&#39;s Service Worker. Now, our function responds from within the Service Worker on visiting <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a>. (More details <a href="#service-workers">ahead</a>.)</p></blockquote></details><p>So, depending on where requests are best handled for your type of application, handler functions may be placed as below:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">client</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.js</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">worker</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.js</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">server</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.js</span></span></code></pre></div><p>Static files, e.g. images, stylesheets, etc, have their place in a files directory named <code>public</code>.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">public</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> logo.png</span></span></code></pre></div><h3 id="step-functions-and-routing-pipelines" tabindex="-1">Step Functions and Routing Pipelines <a class="header-anchor" href="#step-functions-and-routing-pipelines" aria-label="Permalink to &quot;Step Functions and Routing Pipelines&quot;">‚Äã</a></h3><p>Whether routing in the <code>/client</code>, <code>/worker</code>, or <code>/server</code> directory above, nested URLs follow the concept of Step Functions! These are parent-child layout of handlers that model your application&#39;s URL structure.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">server</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.js</span><span style="color:#C3E88D;"> ---------------------------------</span><span style="color:#C3E88D;"> http://localhost:3000</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> products/index.js</span><span style="color:#C3E88D;"> ------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/products</span></span>
<span class="line"><span style="color:#FFCB6B;">        ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> stickers/index.js</span><span style="color:#C3E88D;"> ------------------</span><span style="color:#C3E88D;"> http://localhost:3000/products/stickers</span></span></code></pre></div><p>Each step calls a <code>next()</code> function to forward the current request to the next step of the given URL.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ products/index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>We get a step-based pipeline that helps to decomplicate routing and lets us build out each route horizontally!</p><details><summary>Each step can entirely control the next...</summary><p>Here, a parent step can pass a <code>context</code> object to a child step, and can <em>recompose</em> its return value.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">        let</span><span style="color:#BABED8;"> childContext</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> user</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> id</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 2</span><span style="color:#89DDFF;"> },</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#C792EA;">        let</span><span style="color:#BABED8;"> childResponse</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">childContext</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;"> ...</span><span style="color:#BABED8;">childResponse</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> childResponse</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">title</span><span style="color:#89DDFF;"> +</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;"> | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>But a function can just talk to any other function...</summary><p>It&#39;s versatile, so the <code>next()</code> function can be used to re-route the current request to a different handler - using a relative or absolute URL.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/api/products?params=allowed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // With an absolute URL</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ products/index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">../api/products?params=allowed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // With a relative URL</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>And you can make that a full-fledged <em>in-app</em> request - passing in <code>fetch</code>-equivalent parameters.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/api/products?params=allowed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">            method</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span><span style="color:#FFCB6B;"> headers</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#FFCB6B;"> Authorization</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">djjdd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> }</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home | FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>These requests are received at destination route - <code>/api/products</code> above - as regular HTTP requests!</p></details></details><p>For even more flexibility, pipelines may be designed with <em>wildcard</em> steps using a hyphen <code>-</code> as step name. At runtime, a wildcard step matches any URL segment at its level in the hierarchy! A <code>this.stepname</code> property is always available to tell which URL segment has been matched.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ -/index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">stepname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Untitled</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>More details...</summary><blockquote><p>Every handler function has the following contextual properties:</p><ul><li><code>this.stepname</code> - The name of the current step.</li><li><code>this.pathname</code> - The URL pathname of the current step.</li><li><code>next.stepname</code> - The name of the next step.</li><li><code>next.pathname</code> - The remaining URL pathname after the current step. Server-side handlers have the following in addition:</li><li><code>this.dirname</code> - The filesystem pathname of the current step.</li></ul></blockquote></details><p>Additionally, pipelines may be designed with as many or as few step functions as necessary; the flow control parameters <code>next.stepname</code> and <code>next.pathname</code> are always available at any point to help with the remaining part of the given URL.</p><p>This means that it is even possible to handle all URLs from the root handler alone.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000/products</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Products</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000/products/stickers</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">products/stickers</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Stickers</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // Should we later support other URLs like static assets http://localhost:3000/logo.png</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For the root URL http://localhost:3000</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>The <code>next()</code> function still plays an important role above because Webflo takes a <em>default action</em> when <code>next()</code> is called at the <em>edge</em> of the pipeline - this point where there are no more step functions as there are URL segments.</p><p><strong>For pipelines in the <code>/server</code> directory</strong>, the <em>default action</em> of <code>next()</code>ing at the edge is to go match and return a static file in the <code>public</code> directory.</p><p>So, above, should our handler receive static file requests like <code>http://localhost:3000/logo.png</code>, the statement <code>return next()</code> would get Webflo to match and return the logo at <code>public/logo.png</code>, if any; a <code>404</code> response otherwise.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000,</span><span style="color:#C3E88D;"> http://localhost:3000/products,</span><span style="color:#C3E88D;"> http://localhost:3000/products/stickers,</span><span style="color:#C3E88D;"> etc</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/logo.png</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/logo.png</span></span></code></pre></div><blockquote><p><strong>Note</strong><br>Obviously, the root handler effectively becomes the single point of entry to the application - being that it sees even requests for static files!</p></blockquote><p><strong>For pipelines in the <code>/worker</code> directory</strong>, the <em>default action</em> of <code>next()</code>ing at the edge is to send the request through the network to the server. (But Webflo will check to see whether to (and how to) resolve the request from the application cache.)</p><p>So, above, if we defined handler functions in the <code>/worker</code> directory, we could selectively handle specific requests while <code>next()</code>ing others to the server.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">worker</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000/about</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">about</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">            name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">FluffyPets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            version</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        };</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000/logo.png</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">logo.png</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">        let</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">( </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Logo file size:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">headers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Content-Length</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For every other URL</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Now we get the following handler-to-URL mapping for our application:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> worker/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/about,</span><span style="color:#C3E88D;"> http://localhost:3000/logo.png</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000,</span><span style="color:#C3E88D;"> http://localhost:3000/products,</span><span style="color:#C3E88D;"> http://localhost:3000/products/stickers,</span><span style="color:#C3E88D;"> etc</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/logo.png</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/logo.png</span></span></code></pre></div><details><summary>More details...</summary><blockquote><p>Handlers in the <code>/worker</code> directory see only Same-Origin requests, being that Cross-Origin URLs like <code>https://auth.example.com/oauth</code> do not belong in the application&#39;s layout! But as detailed later, these external URLs may be may configured for strategic caching by the Service Worker.</p></blockquote></details><p><strong>For pipelines in the <code>/client</code> directory</strong>, the <em>default action</em> of <code>next()</code>ing at the edge is to send the request through the network to the server. But where there is a Service Worker layer, then that becomes the next destination.</p><p>So, above, if we defined handler functions in the <code>/client</code> directory, we could selectively handle specific navigation requests in-browser while <code>next()</code>ing others down to the server, or first, the Service Worker layer.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">client</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000/login</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">            name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">John Doe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            role</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">owner</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        };</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For every other URL</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Our overall handler-to-URL mapping for the hypothetical application in context now becomes:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> client/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/login</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> worker/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/about,</span><span style="color:#C3E88D;"> http://localhost:3000/logo.png</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000,</span><span style="color:#C3E88D;"> http://localhost:3000/products,</span><span style="color:#C3E88D;"> http://localhost:3000/products/stickers,</span><span style="color:#C3E88D;"> etc</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/logo.png</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000/logo.png</span></span></code></pre></div><p>If there&#39;s anything we have now, it is the ability to break work down<a href="https://en.wikipedia.org/wiki/Divide-and-conquer_algorithm"><small><sup>[i]</sup></small></a>, optionally across step functions, optionally between layers!</p><h3 id="pages-layout-and-templating" tabindex="-1">Pages, Layout and Templating <a class="header-anchor" href="#pages-layout-and-templating" aria-label="Permalink to &quot;Pages, Layout and Templating&quot;">‚Äã</a></h3><p>HTML files in the <code>public</code> directory, just like every other <em>public</em> file, are served statically when accessed directly - e.g. <code>http://localhost:3000/index.html</code>. But <code>index.html</code> files, specifically, are treated as <em>pages</em> by Webflo. They are, therefore, also accessible with path URLs like <code>http://localhost:3000</code>.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/index.html</span><span style="color:#C3E88D;"> -----------------------</span><span style="color:#C3E88D;"> http://localhost:3000/index.html,</span><span style="color:#C3E88D;"> http://localhost:3000</span></span></code></pre></div><p>But, where an <code>index.html</code> file pairs with a route...</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/index.html</span></span></code></pre></div><p>...the route handler determines what happens.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000/index.html, etc</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // For http://localhost:3000 specifically</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;"> ...</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Now, we are able to access the data component of a route differently from its HTML component!</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">my-app</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> server/index.js</span><span style="color:#C3E88D;"> -------------------------</span><span style="color:#C3E88D;"> http://localhost:3000</span><span style="color:#C3E88D;"> --------------------</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"><span style="color:#FFCB6B;">  ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> public/index.html</span><span style="color:#C3E88D;"> -----------------------</span><span style="color:#C3E88D;"> http://localhost:3000/index.html</span><span style="color:#C3E88D;"> ---------</span><span style="color:#C3E88D;"> text/html</span></span></code></pre></div><p>But, we can also access the route in a way that gets the data rendered into the automatically-paired <code>index.html</code> file for a dynamic page response. We&#39;d simply set the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept" target="_blank" rel="noreferrer"><code>Accept</code></a> header of the request to a value of <code>text/html</code>, and Webflo will automatically perform <a href="#client-and-server-side-rendering">Server-Side Rendering</a> to give a page response.</p><blockquote><p><strong>Note</strong><br>The <code>Accept</code> header hint is already how browsers make requests on every page load. Here, it just works!</p></blockquote><p>This automatic pairing of an <code>index.html</code> file with a route works the same for nested routes! But top-level <code>index.html</code> files are implicitly inherited down the hierarchy. That means that subroutes do not need to have their own <code>index.html</code> document, unless necessary.</p><h4 id="layout-and-templating-overview" tabindex="-1">Layout and Templating Overview <a class="header-anchor" href="#layout-and-templating-overview" aria-label="Permalink to &quot;Layout and Templating Overview&quot;">‚Äã</a></h4><details><summary>Some disambiguation...</summary><blockquote><p>In a Single Page Application, all pages are based off a single <code>index.html</code> document. In a Multi Page Application, pages are individual <code>index.html</code> documents - ideally. But, Server-Side Rendering makes it possible to serve the same, but dynamically-rendered, <code>index.html</code> document across page loads - essentially an SPA architecture hiding on the server. But, here, lets take Multi Page Applications for an individual-page architecture.</p></blockquote></details><p>In a Multi Page Application (with an individual-page architecture), each page is its own <code>index.html</code> document, and it is often necessary to have certain page sections - e.g. site header, footer, and sidebar, etc. - stay consistent across pages. These sections can be defined once and <em>imported</em> on every page.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">my-app</span></span>
<span class="line"><span style="color:#BABED8;">  ‚îî‚îÄ‚îÄ public</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ about/index.html ------------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ products/index.html ---------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ index.html ------------------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ header.html ------------------------------ </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at top of each index.html page --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îî‚îÄ‚îÄ footer.html ------------------------------ </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at bottom of each index.html page --&gt;</span></span></code></pre></div><p>In a Single Page Application, each page is the same <code>index.html</code> document, and it is often necessary to have the main page sections change on each route. These sections can be defined per-route and <em>imported</em> to the document on navigating to their respective route.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">my-app</span></span>
<span class="line"><span style="color:#BABED8;">  ‚îî‚îÄ‚îÄ public</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ about/main.html -------------------------- </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at main area of index.html --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ products/main.html ----------------------- </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at main area of index.html --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ main.html -------------------------------- </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at main area of index.html --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îî‚îÄ‚îÄ index.html ------------------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>This, in both cases, is templating - the ability to define HTML <em>partials</em> once, and have them reused multiple times. Webflo just concerns itself with templating, and the choice of a Multi Page Application or Single Page Application becomes yours! And heck, you can even have the best of both worlds in the same application - with an architecture we&#39;ll call <a href="#in-a-multi-spa-layout">Multi SPA</a>! It&#39;s all a <em>layout</em> thing!</p><p>Now, with pages in Webflo being <a href="#overview">DOM-based</a> (both client-side and <a href="#oohtml-ssr">server-side</a>), documents can be manipulated directly with DOM APIs, e.g. to replace or insert nodes, attributes, etc. But even better, templating in Webflo is based on the <a href="https://github.com/webqit/oohtml#html-modules" target="_blank" rel="noreferrer">HTML Modules</a> and <a href="https://github.com/webqit/oohtml#html-imports" target="_blank" rel="noreferrer">HTML Imports</a> features in <a href="#oohtml">OOHTML</a> - unless disabled in config. These features provide a powerful declarative templating system on top of the standard <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template" target="_blank" rel="noreferrer">HTML <code>&lt;template&gt;</code></a> element - all in a <em>module</em>, <em>export</em> and <em>import</em> paradigm.</p><p>Here, you are able to define reusable contents in a <code>&lt;template&gt;</code> element...</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">header</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">header.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Header Area</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">main</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Main Area</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>...and have them imported anywhere on the root document using an <code>&lt;import&gt;</code> element:</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#header.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>The <em>module</em> element - <code>&lt;template&gt;</code> - is also able to load its contents from a remote <code>.html</code> file that serves as a bundle:</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ bundle.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">header</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">header.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Header Area</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Main Area</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>What <a href="#bundling">we&#39;ll see shortly</a> is how multiple standalone <code>.html</code> files - e.g. those <code>header.html</code>, <code>footer.html</code>, <code>main.html</code> files above - come together into one <code>bundle.html</code> file for an application.</p><h4 id="in-a-multi-page-layout" tabindex="-1">In a Multi Page Layout <a class="header-anchor" href="#in-a-multi-page-layout" aria-label="Permalink to &quot;In a Multi Page Layout&quot;">‚Äã</a></h4><p>In a Multi Page layout (as seen <a href="#layout-and-templating-overview">earlier</a>), generic contents - e.g. header and footer sections, etc. - are typically bundled into one <code>bundle.html</code> file that can be embedded on each page of the application.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#header.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Welcome to our Home Page</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#footer.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public/about</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#header.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Welcome to our About Page</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#footer.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public/products</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#header.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Welcome to our Products Page</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app#footer.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>In this architecture, navigation is traditional - a new page loads each time. The <code>bundle.js</code> script comes with the appropriate OOHTML support level required for the imports to function.</p></blockquote></details><h4 id="in-a-single-page-layout" tabindex="-1">In a Single Page Layout <a class="header-anchor" href="#in-a-single-page-layout" aria-label="Permalink to &quot;In a Single Page Layout&quot;">‚Äã</a></h4><p>In a Single Page layout (as seen <a href="#layout-and-templating-overview">earlier</a>), page-specific contents - e.g. main sections - are typically bundled together into one <code>bundle.html</code> file that can be embedded on the document root. Notice how nested routes end up as nested <code>&lt;template&gt;</code> elements that form the equivalent of the application&#39;s URL structure.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ bundle.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">about</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">main</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Welcome to our About Page</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">products</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">main</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Welcome to our Products Page</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">Welcome to our Home Page</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>Now, the <code>&lt;main&gt;</code> elements are each imported on navigating to their respective routes. This time, Webflo takes care of setting the URL path as a global <code>template</code> attribute on the <code>&lt;body&gt;</code> element such that <code>&lt;import&gt;</code> elements that inherit this global attribute are resolved from its current value.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routes</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#C792EA;"> importscontext</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- This &quot;template&quot; attribute automatically changes to routes/about or routes/products as we navigate to http://localhost:3000/about and http://localhost:3000/products respectively --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">import</span><span style="color:#C792EA;"> ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- This import element omits its &quot;template&quot; attribute so as to inherit the global one --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>In this architecture, navigation is instant and sleek - Webflo prevents a full page reload, obtains and sets data at <code>document.bindings.data</code> for the new URL, then sets the <code>template</code> attribute on the <code>&lt;body&gt;</code> element to the new URL path. The <code>bundle.js</code> script comes with the appropriate OOHTML support level required for the imports to function.</p></blockquote></details><h4 id="in-a-multi-spa-layout" tabindex="-1">In a Multi SPA Layout <a class="header-anchor" href="#in-a-multi-spa-layout" aria-label="Permalink to &quot;In a Multi SPA Layout&quot;">‚Äã</a></h4><p>It&#39;s all a <em>layout</em> thing, so a hybrid of the two architectures above is possible in one application, to take advantage of the unique benefits of each! Here, you are able to have routes that are standalone <code>index.html</code> documents (MPA), which in turn, are able to act as a single document root for their subroutes (SPA).</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">my-app</span></span>
<span class="line"><span style="color:#BABED8;">  ‚îî‚îÄ‚îÄ public</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ about/index.html ------------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- Document root 1 --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ products</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îÇ     ‚îú‚îÄ‚îÄ free/main.html --------------------------- </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at main area of document root 2 --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îÇ     ‚îú‚îÄ‚îÄ paid/main.html --------------------------- </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at main area of document root 2 --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îÇ     ‚îú‚îÄ‚îÄ main.html -------------------------------- </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">main</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at main area of document root 2 --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îÇ     ‚îî‚îÄ‚îÄ index.html ------------------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- Document root 2, (doubles as an SPA) --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ index.html ------------------------------- </span><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- Document root 0 --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îú‚îÄ‚îÄ header.html ------------------------------ </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at top of each document root --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">      ‚îî‚îÄ‚îÄ footer.html ------------------------------ </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;</span><span style="color:#676E95;font-style:italic;"> &lt;!-- To appear at bottom of each document root --&gt;</span></span></code></pre></div><p>The above gives us three document roots: <code>/index.html</code>, <code>/about/index.html</code>, <code>/products/index.html</code>. The <code>/products</code> route doubles as a Single Page Application such that visiting the <code>/products</code> route loads the document root <code>/products/index.html</code> and lets Webflo SPA routing determine which of <code>/products/main.html</code>, <code>/products/free/main.html</code>, <code>/products/paid/main.html</code> is imported on a given URL.</p><p>Webflo ensures that only the amount of JavaScript for a document root is actually loaded! So, above, a common JavaScript build is shared across the three document roots alongside an often tiny root-specific build.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ products/index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/webflo.bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/products/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">...</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ about/index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/webflo.bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/about/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">...</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/webflo.bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">template</span><span style="color:#C792EA;"> def</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pages</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/bundle.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">...</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>The Webflo <code>generate</code> command automatically figures out a given architecture and generates the appropriate scripts for the application! It also factors into the generated scripts the location of each document root so that <a href="#spa-navigation">all navigations to these roots are handled as a regular page load</a>.</p></blockquote></details><h4 id="bundling" tabindex="-1">Bundling <a class="header-anchor" href="#bundling" aria-label="Permalink to &quot;Bundling&quot;">‚Äã</a></h4><p>Template <code>.html</code> files are bundled from the filesystem into a single file using the <a href="#oohtml-cli">OOHTML CLI</a> utility. On installing this utility, you may want to add the following to your npm scripts in <code>package.json</code>.</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">generate:templates</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">oohtml bundle --recursive --auto-embed=routes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>The <code>--recursive</code> flag gets the bundler to recursively bundle <em>subroots</em> in a <a href="#in-a-multi-spa-layout">Multi SPA</a> layout - where certain subdirectories have their own <code>index.html</code> document. (These subroots would be ignored otherwise.)</p><p>The <code>--auto-embed</code> flag gets the bundler to automatically embed the generated <code>bundle.html</code> file on the matched <code>index.html</code> document. A value of <code>routes</code> for the flag ends up as the name of the <em>embed</em> template: <code>&lt;template def=&quot;routes&quot; src=&quot;/bundle.html&quot;&gt;&lt;/template&gt;</code>.</p><blockquote><p><strong>Note</strong><br>If your HTML files are actually based off the <code>public</code> directory, you&#39;ll need to tell the above command to run in the <code>public</code> directory, either by <a href="https://github.com/webqit/oohtml-cli#other-options" target="_blank" rel="noreferrer">configuring the bundler</a>, or by rewriting the command with a prefix: <code>cd public &amp;&amp; oohtml bundle --recursive --auto-embed=routes</code>.</p></blockquote><h3 id="client-and-server-side-rendering" tabindex="-1">Client and Server-Side Rendering <a class="header-anchor" href="#client-and-server-side-rendering" aria-label="Permalink to &quot;Client and Server-Side Rendering&quot;">‚Äã</a></h3><p>With pages in Webflo being <a href="#overview">DOM-based</a> (both client-side and <a href="#oohtml-ssr">server-side</a>), we are able to access and manipulate documents and elements using familiar DOM APIs - e.g. to replace or insert contents, attributes, etc. Rendering in Webflo is based on this concept!</p><p>Here, Webflo simply makes sure that the data obtained from each route is available as part of the <code>document</code> object as <a href="#the-documentstatedata-object"><code>document.bindings.data</code></a>, making it accessible to our rendering logic.</p><p>We are able embed a script on our page and render this data on the relevant parts of the document.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#82AAFF;">         setTimeout</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">             console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">( </span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#F07178;"> )</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // { title: &#39;Home | FluffyPets&#39; }</span></span>
<span class="line"><span style="color:#C792EA;">             let</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> title</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">             document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">title</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> title</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">         },</span><span style="color:#F78C6C;"> 0</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>Where your rendering logic is an external script, your <code>&lt;script&gt;</code> element would need to have an <code>ssr</code> Boolean attribute to get the rendering engine to fetch and run your script on the server.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> ssr</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>From here, even the most-rudimentary form of rendering (using vanilla HTML and native DOM methods) becomes possible, and this is a good thing: you get away with less tooling until you absolutely need to add up on tooling!</p><p>However, since the <code>document</code> objects in Webflo natively support <a href="#oohtml">OOHTML</a> - unless disabled in config, we are able to write reactive UI logic! Here, OOHTML makes it possible to embed reactive <code>&lt;script&gt;</code> elements (called <a href="https://github.com/webqit/oohtml#subscript" target="_blank" rel="noreferrer">Subscript</a>) right within HTML elements - where each expression automatically self-updates whenever references to data, or its properties, get an update!</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"> &lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;"> &lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;"> &lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">          let</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> title </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">          document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">title </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> title</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">          let</span><span style="color:#BABED8;"> h1Element </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> this.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">h1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">          h1Element</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">innerHTML </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> title</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;"> &lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><details><summary>Re-introducing UI logic in the actual language for logic - JavaScript...</summary><blockquote><p>So, this is simple to think about: HTML already just let&#39;s us embed <code>&lt;script&gt;</code> elements for UI logic, and so be it! What OOHTML does further is simply to extend the plain old <code>&lt;script&gt;</code> element with the <code>subscript</code> type which gets any JavaScript code to be <em>reactive</em>! Compared with other syntax alternatives, this uniquely enables us to do all things logic in the actual language for logic - JavaScript.</p></blockquote></details><p>Note that because these scripts are naturally reactive, we do not require any <code>setTimeout()</code> construct like we required earlier in the case of the classic <code>&lt;script&gt;</code> element. These expressions self-update as the values they depend on become available, removed, or updated - i.e. as <code>document.bindings</code> gets updated.</p><p>From here, we are also able to write more succinct code! Using the <a href="https://github.com/webqit/oohtml#namespaced-html" target="_blank" rel="noreferrer">Namespaced HTML</a> feature in OOHTML, we could do without those <code>querySelector()</code> calls up there. Also, we could go on to use any DOM manipulation library of our choice; e.g jQuery, or even better, the jQuery-like <a href="https://github.com/webqit/play-ui" target="_blank" rel="noreferrer">Play UI</a> library.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"> &lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  ‚îú‚îÄ‚îÄ index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;"> &lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#C792EA;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;"> &lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/jquery.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;</span><span style="color:#F07178;">body</span><span style="color:#C792EA;"> namespace</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">h1</span><span style="color:#C792EA;"> id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">headline1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">          let</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> title </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">          document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">title </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> title</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">          let</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> headline1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> headline2 </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> this.</span><span style="color:#BABED8;">namespace</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">          $</span><span style="color:#BABED8;">(headline1)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">html</span><span style="color:#BABED8;">(title)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">          if</span><span style="color:#BABED8;"> (headline2) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#82AAFF;">              $</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">headline2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">html</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">title</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">          }</span></span>
<span class="line"><span style="color:#89DDFF;">         &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">     &lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;"> &lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>Above, we&#39;ve also referenced some currently non-existent element <code>headline2</code> - ahead of when it becomes added in the DOM! This should give a glimpse of the powerful reactivity we get with having OOHTML around on our document!</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#BABED8;"> headline2</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">h2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    headline2</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">id</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">headline2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">headline2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#F78C6C;"> 1000</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>Taking things further, it is possible to write class-based components that abstract away all logic! You can find a friend in <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements" target="_blank" rel="noreferrer">Custom Elements</a>! Plus, your Custom Elements can function reactively using <a href="https://github.com/webqit/oohtml#subscript" target="_blank" rel="noreferrer">SubscriptElement</a> as base class!</p><h4 id="the-document-bindings-url-object" tabindex="-1">The <code>document.bindings.url</code> Object <a class="header-anchor" href="#the-document-bindings-url-object" aria-label="Permalink to &quot;The \`document.bindings.url\` Object&quot;">‚Äã</a></h4><p>This is a <em>live</em> object that reperesents the properties of the application URL at any point in time. The object exposes the same URL properties as of a standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank" rel="noreferrer"><code>URL</code></a> object, but, here, as <em>live</em> properties that can be observed as navigation happens, and modified to initiate navigation - all using the <a href="#the-observer-api">Observer API</a>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> url </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(url) </span><span style="color:#676E95;font-style:italic;">// { hash, host, hostname, href, origin, password, pathname, port, protocol, search, searchParams, username }</span></span></code></pre></div><details><summary>More examples...</summary><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(url</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">hash</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">hash</span><span style="color:#89DDFF;"> ===</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // true</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Navigates to &quot;/login#form&quot; as if a link was clicked</span></span>
<span class="line"><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">synthetic-navigation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">href</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/login#form</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Or...</span></span>
<span class="line"><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">synthetic-navigation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> pathname</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> hash</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">#form</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(url</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">hash)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // #form</span></span></code></pre></div><p>There is also the <em>convenience</em> <code>query</code> property that offers the URL parameters as a <em>live</em> object.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// For URL: http://localhost:3000/login?as=student</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(url</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">query</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">as) </span><span style="color:#676E95;font-style:italic;">// student</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Re-rewrite the URL and initiate navigation by simply modifying a query parameter</span></span>
<span class="line"><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">synthetic-navigation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">query</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">as</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">business</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;"> let</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> query</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> as</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> role </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> url</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">title </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Login as </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> +</span><span style="color:#BABED8;"> role</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></details><h3 id="requests-and-responses" tabindex="-1">Requests and Responses <a class="header-anchor" href="#requests-and-responses" aria-label="Permalink to &quot;Requests and Responses&quot;">‚Äã</a></h3><p>On each request, the event object passed to route handlers exposes the incoming request as <code>event.request</code>. This is an instance of <code>event.Request</code> - an extension of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noreferrer">WHATWG Request</a> class. The event object also exposes <code>Response</code> - an extension of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noreferrer">WHATWG Response</a> class, for returning instance-based responses. You enjoy routing that is based on standard interfaces!</p><p>Routes in Webflo can be designed for different types of request/response scenarios. Here are some important ones:</p><h4 id="scenario-1-static-file-requests-and-responses" tabindex="-1">Scenario 1: Static File Requests and Responses <a class="header-anchor" href="#scenario-1-static-file-requests-and-responses" aria-label="Permalink to &quot;Scenario 1: Static File Requests and Responses&quot;">‚Äã</a></h4><p>Static file requests like <code>http://localhost:3000/logo.png</code> are automatically responded to by Webflo when <code>next()</code>ed forward by route handlers, or where there are no route handlers.</p><ul><li>On the server, Webflo serves files from the <code>public</code> directory. File contents along with the appropriate headers like <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="noreferrer"><code>Content-Type</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Length" target="_blank" rel="noreferrer"><code>Content-Length</code></a>, etc. are returned as an instance of <code>Response</code>. Where a request has an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding" target="_blank" rel="noreferrer"><code>Accept-Encoding</code></a> header set (e.g. <code>gzip</code>, <code>br</code>) and there exists a matching <em>compressed version</em> of the said file on the file system (e.g. <code>./public/logo.png.gz</code>, <code>./public/logo.png.br</code>), the compressed version is served and the appropriate <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding" target="_blank" rel="noreferrer"><code>Content-Encoding</code></a> response header is set.</li></ul><h4 id="scenario-2-api-requests-and-responses" tabindex="-1">Scenario 2: API Requests and Responses <a class="header-anchor" href="#scenario-2-api-requests-and-responses" aria-label="Permalink to &quot;Scenario 2: API Requests and Responses&quot;">‚Äã</a></h4><p>JSON (API) requests - requests that expect to get a JSON response (i.e. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="noreferrer"><code>Content-Type</code></a>: <code>application/json</code>) - are automatically satisfied by Webflo with a valid JSON response. Here, Webflo simply jsonfies pipeline return values - which are usually plain objects, or other jsonfyable types - <code>string</code>, <code>number</code>, <code>boolean</code>, <code>array</code>.</p><ul><li>These requests need not have an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept" target="_blank" rel="noreferrer"><code>Accept</code></a> header; but if they should, it must be the value of <code>application/json</code>.</li><li>Routes intended to be accessed this way are expected to return a jsonfyable value (or an instance of <code>Response</code> containing same) from the pipeline.</li><li>Pipeline responses that are an instance of <code>Response</code> with a <code>Content-Type</code> header already set are sent as-is.</li></ul><h4 id="scenario-3-page-requests-and-responses" tabindex="-1">Scenario 3: Page Requests and Responses <a class="header-anchor" href="#scenario-3-page-requests-and-responses" aria-label="Permalink to &quot;Scenario 3: Page Requests and Responses&quot;">‚Äã</a></h4><p>HTML page requests - requests that expect to get an HTML response (i.e. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="noreferrer"><code>Content-Type</code></a>: <code>text/html</code>) - are automatically satisfied by Webflo with a valid HTML response. Pipeline return values that are objects are automatically used for <a href="#client-and-server-side-rendering">Server-Side Rendering</a>.</p><ul><li>These requests need to have an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept" target="_blank" rel="noreferrer"><code>Accept</code></a> header of <code>text/html</code>, or something that resolves to <code>text/html</code> - e.g. <code>text/*</code>, <code>*/html</code>, <code>*/*</code>.</li><li>Routes intended to be accessed this way are expected to return a plain object (or an instance of <code>Response</code> containing same) from the pipeline in order to be renderable.</li><li>Pipeline responses that are an instance of <code>Response</code> with a <code>Content-Type</code> header already set are sent as-is, and not rendered.</li></ul><h4 id="scenario-4-single-page-navigation-requests-and-responses" tabindex="-1">Scenario 4: Single Page Navigation Requests and Responses <a class="header-anchor" href="#scenario-4-single-page-navigation-requests-and-responses" aria-label="Permalink to &quot;Scenario 4: Single Page Navigation Requests and Responses&quot;">‚Äã</a></h4><p>In a Single Page Application layout, every navigation event (page-to-page navigation, history back and forward navigation, and form submissions) is expected to initiate a request/response flow without a full page reload, since the destination URLs are often based off the already loaded document. The Webflo client JS intercepts these navigation events and generates the equivalent request object with an <code>Accept</code> header of <code>application/json</code>, so that data can be obtained as a JSON object (<a href="#scenario-2-api-requests-and-responses">scenerio 2 above</a>) for <a href="#client-and-server-side-rendering">Client-Side Rendering</a>.</p><p>The generated request also <a href="#custom-redirect-responses">hints the server</a> on how to return cross-SPA redirects (redirects that will point to another origin, or to another SPA root (in a <a href="#in-a-multi-spa-layout">Multi SPA</a> layout)) so that it can be handled manually by the client. The following headers are set: <code>X-Redirect-Policy: manual-when-cross-spa</code>, <code>X-Redirect-Code: 200</code>.</p><ul><li>Same-SPA redirects are sent as-is, and the Webflo client JS receives and renders the final data and updates the address bar with the final URL.</li><li>Cross-SPA/cross-origin redirects are communicated back, as hinted, and the destination URL is opened as a fresh page load.</li></ul><h4 id="scenario-5-range-requests-and-responses" tabindex="-1">Scenario 5: Range Requests and Responses <a class="header-anchor" href="#scenario-5-range-requests-and-responses" aria-label="Permalink to &quot;Scenario 5: Range Requests and Responses&quot;">‚Äã</a></h4><p>In all cases, where a request specifies a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Range" target="_blank" rel="noreferrer"><code>Range</code></a> header, Webflo automatically slices the response body to satisfy the range, and the appropriate <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Range" target="_blank" rel="noreferrer"><code>Content-Range</code></a> response header is set.</p><ul><li>Pipeline responses that are an instance of <code>Response</code> with a <code>Content-Range</code> header already set are sent as-is.</li></ul><h4 id="other-requests-and-responses" tabindex="-1">Other Requests and Responses <a class="header-anchor" href="#other-requests-and-responses" aria-label="Permalink to &quot;Other Requests and Responses&quot;">‚Äã</a></h4><p>Routing Pipelines may return any other data type, e.g. an instance of the native <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noreferrer">FormData</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" target="_blank" rel="noreferrer">Blob</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank" rel="noreferrer">File</a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" target="_blank" rel="noreferrer">ReadableStream</a>, etc., or an instance of <code>Response</code> containing same - usually on routes that do not double as a page route. Webflo tries to send these along with the appropriate response headers.</p><blockquote><p><strong>Note</strong><br>The fact that all requests, even static file requests, are seen by route handlers, where defined, means that they get a chance to dynamically generate the responses that the client sees!</p></blockquote><h4 id="custom-redirect-responses" tabindex="-1">Custom Redirect Responses <a class="header-anchor" href="#custom-redirect-responses" aria-label="Permalink to &quot;Custom Redirect Responses&quot;">‚Äã</a></h4><p>It is possible to hint the server on how to serve redirect responses. The idea is to substitute the standard <code>302</code>, <code>301</code> response code for these redirects with a non-rediret status code so that it can be recieved as a normal response and handled manually. The following pair of headers make this possible: <code>X-Redirect-Code</code>, <code>X-Redirect-Policy</code>.</p><ul><li><p>The <code>X-Redirect-Code</code> can be any valid HTTP status code (often preferably, in the 2xx). This is the response code that you want Webflo to substitute the actual redirect code with.</p></li><li><p>The <code>X-Redirect-Policy</code> header can be any of:</p><ul><li><code>manual</code> - which means &quot;treat all redirects as manual&quot;</li><li><code>manual-if-cross-origin</code> - which means &quot;treat cross-origin redirects as manual&quot;</li><li><code>manual-if-cross-spa</code> - which means &quot;treat cross-SPA redirects (including cross-origin redirects) as manual&quot;</li></ul><p>In each case, the substituted, original redirect code is returned back in the response in a special <code>X-Redirect-Code</code> response header, alongside the standard <code>Location</code> header.</p></li></ul><h4 id="failure-responses" tabindex="-1">Failure Responses <a class="header-anchor" href="#failure-responses" aria-label="Permalink to &quot;Failure Responses&quot;">‚Äã</a></h4><p>Where pipelines return <code>undefined</code>, a <code>Not Found</code> status is implied.</p><ul><li>On the server side, a <code>404</code> HTTP response is returned.</li><li>On the client-side, the initiating document in the browser has its <code>document.bindings.data</code> emptied. The error is also exposed on the <a href="#the-documentstatenetwork-object"><code>document.bindings.network.error</code></a> property.</li></ul><p>Where pipelines throw an exception, an <em>error</em> status is implied.</p><ul><li>On the server side, the error is logged and a <code>500</code> HTTP response is returned.</li><li>On the client-side, the initiating document in the browser has its <code>document.bindings.data</code> emptied. The error is also exposed on the <a href="#the-documentstatenetwork-object"><code>document.bindings.network.error</code></a> property.</li></ul><h4 id="cookie-responses" tabindex="-1">Cookie Responses <a class="header-anchor" href="#cookie-responses" aria-label="Permalink to &quot;Cookie Responses&quot;">‚Äã</a></h4><p>Handlers can set <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie" target="_blank" rel="noreferrer">response cookies</a> via the standard <code>Response</code> constructor, or using the standard <code>Headers.set()</code> method.</p><h3 id="webflo-applications" tabindex="-1">Webflo Applications <a class="header-anchor" href="#webflo-applications" aria-label="Permalink to &quot;Webflo Applications&quot;">‚Äã</a></h3><p>Webflo comes ready for any type of application!</p><ul><li><a href="#client-side-applications">Client-Side Applications</a></li><li><a href="#progressive-web-apps">Progressive Web Apps</a></li><li><a href="#api-backends">API Backends</a></li><li><a href="#static-sites">Static Sites</a></li></ul><p><em>And you can go hybrid!</em></p><h4 id="client-side-applications" tabindex="-1">Client-Side Applications <a class="header-anchor" href="#client-side-applications" aria-label="Permalink to &quot;Client-Side Applications&quot;">‚Äã</a></h4><p>Web pages that embed the Webflo client JS deliver a great user experience. It&#39;s simple: the <code>npm run generate</code> command does both the building and embedding of the script (or scripts), for the document root (or document roots - in a <a href="#in-a-multi-page-layout">Multi Page</a> / <a href="#in-a-multi-spa-layout">Multi SPA</a> layout)!</p><p>On being loaded, the state of the application is initialized, or is restored through hydration - where <a href="#client-and-server-side-rendering">Server-Side Rendering</a> was involved to optimize for first paint, and an app-like experience kicks in! For <a href="#in-a-single-page-layout">Single-Page Applications</a>, <a href="#client-and-server-side-rendering">Client-Side Rendering</a> is performed on each navigation.</p><h5 id="spa-navigation" tabindex="-1">SPA Navigation <a class="header-anchor" href="#spa-navigation" aria-label="Permalink to &quot;SPA Navigation&quot;">‚Äã</a></h5><p>Unless disabled in config, it is factored-in at build time for the application client JS to be able to automatially figure out when to intercept a navigation event and prevent a full page reload, and when not to.</p><details><summary>How it works...</summary><p>SPA Navigation follows the following rules:</p><ul><li>When it ascertains that the destination URL is based on the current running <code>index.html</code> document in the browser (an SPA architecture), a full page reload is prevented for <em>soft</em> navigation. But where the destination URL points out of the current document root (a <a href="#in-a-multi-spa-layout">Multi SPA</a> architecture), navigation is allowed as a normal page load, and a new page root is loaded.</li><li>If navigation is initiated with any of the following keys pressed: Meta Key, Alt Key, Shift Key, Ctrl Key, navigation is allowed to work the default way - regardless of the first rule above.</li><li>If navigation is initiated from a link element that has the <code>target</code> attribute, or the <code>download</code> attribute, navigation is allowed to work the default way - regardless of the first rule above.</li><li>If navigation is initiated from a form element that has the <code>target</code> attribute, navigation is allowed to work the default way - regardless of the first rule above.</li></ul></details><details><summary>Config (Default)</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">spa_navigation</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><blockquote><p><strong>File: <code>.webqit/webflo/client.json</code></strong></p></blockquote><blockquote><p><strong>Command: <code>webflo config client spa_navigation=TRUE</code></strong></p></blockquote></details><h5 id="spa-state" tabindex="-1">SPA State <a class="header-anchor" href="#spa-state" aria-label="Permalink to &quot;SPA State&quot;">‚Äã</a></h5><p>On the client side of a Webflo application, <a href="#the-idea-of-state">the idea of state</a> also includes the following aspects of the client-side lifecycle that can be used to provide visual cues on the UI.</p><h6 id="the-document-bindings-network-object" tabindex="-1">The <code>document.bindings.network</code> Object <a class="header-anchor" href="#the-document-bindings-network-object" aria-label="Permalink to &quot;The \`document.bindings.network\` Object&quot;">‚Äã</a></h6><p>This is a <em>live</em> object that exposes the network activity and network state of the application.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">network) </span><span style="color:#676E95;font-style:italic;">// { requesting, remote, error, redirecting, connectivity, }</span></span></code></pre></div><details><summary>Property: <code>.network.requesting: null|Object</code></summary><p>This property tells when a request is ongoing, in which case it exposes the <code>params</code> object used to initiate the request.</p><p>On the UI, this could be used to hide a menu drawer that may have been open.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">menu-drawer</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> network</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> requesting </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> (requesting) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#82AAFF;">        $</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">open</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#FF9CAC;"> false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">menu-drawer</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></details><details><summary>Property: <code>.network.remote: null|String</code></summary><p>This property tells when a remote request is ongoing - usually the same navigation requests as at <code>network.requesting</code>, but when not handled by any client-side route handlers, or when <code>next()</code>ed to this point by route handlers. The <code>remote</code> property also goes live when a route handler calls the special <code>fetch()</code> function that they recieve on their fourth parameter.</p><p>On the UI, this could be used to show/hide a spinner, or progress bar, to provide a visual cue.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">progress-bar</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> network</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> remote </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">    $</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hidden</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> !</span><span style="color:#BABED8;">remote)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">progress-bar</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></details><details><summary>Property: <code>.network.error: null|Error</code></summary><p>This property tells when a request is <em>errored</em> in which case it contains an <code>Error</code> instance of the error. For requests that can be retried, the <code>Error</code> instance also has a custom <code>retry()</code> method.</p><p>On the UI, this could be used to show/hide cute error elements.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">nice-error</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> network</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> error </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">    $</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hidden</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> !</span><span style="color:#BABED8;">error)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">nice-error</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></details><details><summary>Property: <code>.network.redirecting: null|String</code></summary><p>This property tells when a client-side redirect is ongoing - see <a href="#scenario-4-single-page-navigation-requests-and-responses">Scenario 4: Single Page Navigation Requests and Responses</a> - in which case it exposes the destination URL.</p><p>On the UI, this could be used to mark the current page as stale and prevent further interactions.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> network</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> redirecting </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">    $</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">css</span><span style="color:#BABED8;">(redirecting </span><span style="color:#89DDFF;">?</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> pointerEvents</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> filter</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">blur(2)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> :</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> pointerEvents</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> filter</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">blur(0)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></details><details><summary>Property: <code>.network.connectivity: String</code></summary><p>This property tells of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/onLine" target="_blank" rel="noreferrer">the browser&#39;s ability to connect to the network</a>: <code>online</code>, <code>offline</code>.</p><p>On the UI, this could be used to show/hide a connectivity status.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#C792EA;"> quantum</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> network</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> connectivity </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">    $</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#BABED8;">( </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">connectivity</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> connectivity })</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></details><p>Here are some additional examples with the <a href="#the-observer-api">Observer API</a>.</p><details><summary>Visualize the network state...</summary><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Visualize the network state</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> networkVisualizer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;font-style:italic;"> changes</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    changes</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">name</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#BABED8;">Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">network</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> networkVisualizer)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Or: Observer.observe(document, [ [&#39;state&#39;, &#39;network&#39;] ], networkVisualizer, { subtree: true });</span></span></code></pre></div></details><details><summary>Visualize &quot;connectivity&quot;...</summary><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Visualize the &#39;connectivity&#39; property</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> connectivityVisualizer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;font-style:italic;"> e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">You are </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#BABED8;">Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">network</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">connectivity</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> connectivityVisualizer)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Or: Observer.observe(document.bindings, [ [&#39;network&#39;, &#39;connectivity&#39;] ], connectivityeVisualizer);</span></span></code></pre></div></details><details><summary>Catch request errors; attempt a retry...</summary><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Catch request errors; attempt a retry</span></span>
<span class="line"><span style="color:#BABED8;">Observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#BABED8;">(document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">bindings</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">network</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> e</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">retry</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Retrying...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">retry</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></details><h5 id="form-actions" tabindex="-1">Form Actions <a class="header-anchor" href="#form-actions" aria-label="Permalink to &quot;Form Actions&quot;">‚Äã</a></h5><p>When navigation occurs <a href="#scenario-4-single-page-navigation-requests-and-responses">via form submissions</a>, the form element and the submit button are made to go on the <em>active</em> state while the request is being processed. For both of these elements, the Webflo client simply sets the <code>element.state.active</code> to <code>true</code> on submission, then <code>false</code>, on completion.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#C792EA;"> method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">input</span><span style="color:#C792EA;"> name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> placeholder</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Your username...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#82AAFF;">    $</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">css</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">state</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">active </span><span style="color:#89DDFF;">?</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> pointerEvents</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> opacity</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">o.5</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> :</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> pointerEvents</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> opacity</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>Also, you&#39;d remember that HTML forms can only accept two HTTP methods on their <code>method</code> attribute: <code>GET</code>, <code>POST</code>! And the same constraint exists on the equivalent <code>formmethod</code> attribue in submit buttons. You are able to overcome this in Webflo by using alternative <code>data-</code> attributes: <code>data-method</code>, <code>data-formmethod</code>, respectively.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#C792EA;"> data-method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">patch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">input</span><span style="color:#C792EA;"> name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> placeholder</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Enter new price...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h4 id="progressive-web-apps" tabindex="-1">Progressive Web Apps <a class="header-anchor" href="#progressive-web-apps" aria-label="Permalink to &quot;Progressive Web Apps&quot;">‚Äã</a></h4><p>Webflo client-side applications are intended to provide an app-like-first experience. So unless disabled in config, a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" target="_blank" rel="noreferrer">Service Worker</a> is built as part of your application on running the <code>npm run generate</code> command. And as covered above, you may define <a href="#handler-functions-and-layout">route handlers in the <code>/worker</code> directory</a> of your application, and these will be built into the service worker to handle Same-Origin requests of the application. Where there are no <em>worker</em> handlers, or where these forward incoming requests, requests are fetched, either from the cache, or from the network, depending on the fetching strategy built into the Service Worker.</p><details><summary>Config (Default)</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">service_worker_support</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><blockquote><p><strong>File: <code>.webqit/webflo/client.json</code></strong></p></blockquote><blockquote><p><strong>Command: <code>webflo config client service_worker_support=TRUE</code></strong></p></blockquote></details><h5 id="fetching-strategy" tabindex="-1">Fetching Strategy <a class="header-anchor" href="#fetching-strategy" aria-label="Permalink to &quot;Fetching Strategy&quot;">‚Äã</a></h5><details><summary>Network First</summary><p>This strategy tells the Service Worker to always attempt fetching from the network first for given resources, before fetching from the cache. On every successful network fetch, a copy of the response is saved to the cache for next time. (This is good for resources that need to be fresh to the user on a &quot;best effort&quot; basis.) Unless changed, this is Webflo&#39;s default fetching strategy. When not the default strategy, a list of specific URLs that should be fetched this way can be configured.</p><details><summary>Config (Default)</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">default_fetching_strategy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">network-first</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><p><em>To list specific URLs...</em></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">network_first_urls</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/logo.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> ]</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><blockquote><p><strong>File: <code>.webqit/webflo/worker.json</code></strong></p></blockquote><blockquote><p><strong>Command: <code>webflo config worker default_fetching_strategy=network-first</code></strong></p></blockquote></details></details><details><summary>Cache First</summary><p>This strategy tells the Service Worker to always attempt fetching from the cache first for given resources, before fetching from the network. After serving a cached response, or where not found in cache, a network fetch happens and a copy of the response is saved to the cache for next time. (This is good for resources that do not critially need to be fresh to the user.) When not the default strategy, a list of specific URLs that should be fetched this way can be configured.</p><details><summary>Config</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">default_fetching_strategy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cache-first</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><p><em>To list specific URLs...</em></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">cache_first_urls</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/logo.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> ]</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><blockquote><p><strong>File: <code>.webqit/webflo/worker.json</code></strong></p></blockquote><blockquote><p><strong>Command: <code>webflo config worker default_fetching_strategy=cache-first</code></strong></p></blockquote></details></details><details><summary>Network Only</summary><p>This strategy tells the Service Worker to always fetch given resources from the network only. They are simply not available when offline. (This is good for resources that critially need to be fresh to the user.) When not the default strategy, a list of specific URLs that should be fetched this way can be configured.</p><details><summary>Config</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">default_fetching_strategy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">network-only</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><p><em>To list specific URLs...</em></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">network_only_urls</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/logo.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> ]</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><blockquote><p><strong>File: <code>.webqit/webflo/worker.json</code></strong></p></blockquote><blockquote><p><strong>Command: <code>webflo config worker default_fetching_strategy=network-only</code></strong></p></blockquote></details></details><details><summary>Cache Only</summary><p>This strategy tells the Service Worker to always fetch given resources from the cache only. (This is good for resources that do not change often.) When not the default strategy, a list of specific URLs that should be fetched this way can be configured. The listed resources are pre-cached ahead of when they&#39;ll be needed - and are served from the cache each time. (Pre-caching happens on the one-time <code>install</code> event of the Service Worker.)</p><details><summary>Config</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">default_fetching_strategy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cache-only</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><p><em>To list specific URLs...</em></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">cache_only_urls</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/logo.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> ]</span><span style="color:#89DDFF;"> }</span></span></code></pre></div><blockquote><p><strong>File: <code>.webqit/webflo/worker.json</code></strong></p></blockquote><blockquote><p><strong>Command: <code>webflo config worker default_fetching_strategy=cache-only</code></strong></p></blockquote></details></details><p>In all cases above, the convention for specifying URLs for a strategy accepts an <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLPattern" target="_blank" rel="noreferrer">URL pattern</a> - against which URLs can be matched on the fly. For example, to place all files in an <code>/image</code> directory (and subdirectories) on the <em>Cache First</em> strategy, the pattern <code>/image/*</code> can be used. To place all <code>.svg</code> files in an <code>/icons</code> directory (including subdirectories) on the <em>Cache Only</em> strategy, the pattern <code>/icons/*.svg</code> can be used. (Specifically for the <em>Cache Only</em> strategy, patterns are resolved at Service Worker build-time, and each pattern must match, at least, a file.)</p><details><summary>Example...</summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">cache_only_urls</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/icons/*.svg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> ]</span><span style="color:#89DDFF;"> }</span></span></code></pre></div></details><h5 id="cross-thread-communications" tabindex="-1">Cross-Thread Communications <a class="header-anchor" href="#cross-thread-communications" aria-label="Permalink to &quot;Cross-Thread Communications&quot;">‚Äã</a></h5><p>A couple APIs exists in browsers for establishing a two-way communication channel between a page and its Service Worker, for firing UI Notifications from either ends, and for implementing Push Notifications. Webflo offers to simply this with a unifying set of conventions:</p><h6 id="the-workport-api" tabindex="-1">The <code>workport</code> API <a class="header-anchor" href="#the-workport-api" aria-label="Permalink to &quot;The \`workport\` API&quot;">‚Äã</a></h6><p>This is an object with simple methods for working with <em>cross-thread</em> messages, UI Notifications, and Push Notifications.</p><p>On both the client and worker side of your application, the <code>workport</code> object is accessible from route handlers as <code>this.runtime.workport</code>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> [client|worker]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> workport</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> this.</span><span style="color:#BABED8;">runtime</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;"> ...</span><span style="color:#89DDFF;"> }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;"> ...</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>For cross-thread messaging, both sides of the API exposes the following methods:</p><details><summary>Method: <code>.messaging.post()</code></summary><p>The <code>.messaging.post()</code> method is used for sending any arbitrary data to the other side. E.g. <code>workport.messaging.post({ type: &#39;TEST&#39; })</code>.</p></details><details><summary>Method: <code>.messaging.listen()</code></summary><p>The <code>.messaging.listen()</code> method is used for registering a listener to the <code>message</code> event from the other side. E.g. <code>workport.messaging.listen(event =&gt; console.log(event.data.type))</code>. (See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/message_event" target="_blank" rel="noreferrer"><code>window: onmessage</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/message_event" target="_blank" rel="noreferrer"><code>worker: onmessage</code></a>.)</p></details><details><summary>Method: <code>.messaging.request()</code></summary><p>The <code>.messaging.request()</code> method is used for sending a message to the other side and obtaing a response, using the <a href="https://developer.mozilla.org/docs/Web/API/MessageChannel/MessageChannel" target="_blank" rel="noreferrer">MessageChannel</a> API.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// On the worker side</span></span>
<span class="line"><span style="color:#BABED8;">workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ports</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ports</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postMessage</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">WORKS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// On the client side</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> response </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">TEST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(response)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // { type: &#39;WORKS&#39; }</span></span></code></pre></div></details><details><summary>Method: <code>.messaging.channel()</code></summary><p>The <code>.messaging.channel()</code> method is used for sending <em>broadcast</em> messages to the other side - including all other browsing contents that live on the same origin, using the <a href="https://developer.mozilla.org/docs/Web/API/Broadcast_Channel_API" target="_blank" rel="noreferrer">Broadcast Channel</a> API.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// On the worker side</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> channelId </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">channel-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">channel</span><span style="color:#BABED8;">(channelId)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// On the client side</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> channelId </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">channel-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">channel</span><span style="color:#BABED8;">(channelId)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">broadcast</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">TEST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></details><p>For <a href="https://developer.mozilla.org/en-US/docs/Web/API/notification" target="_blank" rel="noreferrer">UI Nofitications</a>, both sides of the API exposes the following methods:</p><details><summary>Method: <code>.nofitications.fire()</code></summary><p>The <code>.nofitications.fire()</code> method is used for firing up a UI notification. This uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notification/Notification" target="_blank" rel="noreferrer"><code>Nofitications constructor</code></a>, and thus, accepts the same arguments as the constructor. But it returns a <code>Promise</code> that resolves when the notification is <em>clicked</em> or <em>closed</em>, but rejects when the notification encounters an error, or when the application isn&#39;t granted the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notification/requestPermission" target="_blank" rel="noreferrer">notification permission</a>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> title </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Test Nofitication</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> options </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> body</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> icon</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> actions</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [ </span><span style="color:#89DDFF;">...</span><span style="color:#BABED8;"> ] </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#BABED8;">workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">nofitications</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fire</span><span style="color:#BABED8;">(title</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> options)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">action</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></details><details><summary>Method: <code>.nofitications.handle()</code></summary><p>The <code>.nofitications.handle()</code> method (in Service-Workers) is used for handling <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/notificationclick_event" target="_blank" rel="noreferrer"><code>notificationclick</code></a> events. (Handlers are called each time a notification is clicked.)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">workport</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">nofitications</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">handle</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">action</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></details><p>For <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API" target="_blank" rel="noreferrer">Push Nofitications</a>, the client-side of the API exposes the following methods:</p><details><summary>Method: <code>.push.subscribe()</code></summary><p>The <code>.push.subscribe()</code> method is the equivalent of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/PushManager/subscribe" target="_blank" rel="noreferrer"><code>PushManager.subscribe()</code></a> method. (But this can also take the <em>applicationServerKey</em> as a first argument, and other options as a second argument, in which case it automatically runs the key through an <code>urlBase64ToUint8Array()</code> function.)</p></details><details><summary>Method: <code>.push.unsubscribe()</code></summary><p>The <code>.push.unsubscribe()</code> method is the equivalent of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/PushSubscription/unsubscribe" target="_blank" rel="noreferrer"><code>PushSubscription.unsubscribe()</code></a> method.</p></details><details><summary>Method: <code>.push.getSubscription()</code></summary><p>The <code>.push.getSubscription()</code> method is the equivalent of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/PushManager/getSubscription" target="_blank" rel="noreferrer"><code>PushManager.getSubscription()</code></a> method.</p></details><p>The worker-side of the API exposes the following methods:</p><details><summary>Method: <code>.push.listen()</code></summary><p>The <code>.push.listen()</code> method is for listening to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/PushEvent" target="_blank" rel="noreferrer"><code>push</code></a> from within Service Workers. E.g. <code>workport.push.listen(event =&gt; console.log(event.data.type))</code>.</p></details><h6 id="route-events" tabindex="-1">Route <em>events</em> <a class="header-anchor" href="#route-events" aria-label="Permalink to &quot;Route *events*&quot;">‚Äã</a></h6><p>These are simple route events that fire when messaging and notification events happen.</p><p>On both the client and worker side of your application, you can define an event listener alongside your <em>root</em> route handler. The event listener is called to handle all messaging and notification events that happen.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> [client|worker]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;"> ...</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> alert</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;"> ...</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>The event type is given in the <code>event.type</code> property. This could be:</p><ul><li><strong><code>message</code></strong> - both client and worker side. For <em>replyable</em> messages, the event handler&#39;s return value is automatically sent back as response.</li><li><strong><code>notificationclick</code></strong> - worker side.</li><li><strong><code>push</code></strong> - worker side.</li></ul><details><summary>Advanced...</summary><p>The <code>next()</code> function could be used to delegate the handling of an event to step handlers where defined. This time, the path name must be given as a second argument to the call.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> worker</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> alert</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">push</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        await</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/services/push</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">event</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></details><h4 id="api-backends" tabindex="-1">API Backends <a class="header-anchor" href="#api-backends" aria-label="Permalink to &quot;API Backends&quot;">‚Äã</a></h4><p>In Webflo, an API backend is what you, in essence, come off with with your server-side routes.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;"> ...</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>You are always able to lay out your route handlers in the structure for a formal REST API.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">server</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.js</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> api/v1/index.js</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> api/v1/products/index.js</span></span></code></pre></div><p>And if you will partition your backend for both page routes and a formal REST API...</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">server</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> index.js</span><span style="color:#C3E88D;">                  ‚îÄ‚îÄ‚îê</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> cart/index.js</span><span style="color:#C3E88D;">               ‚îú‚îÄ</span><span style="color:#C3E88D;"> Page</span><span style="color:#C3E88D;"> Routes</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> products/index.js</span><span style="color:#C3E88D;">         ‚îÄ‚îÄ‚îò</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> api/v1/index.js</span><span style="color:#C3E88D;">           ‚îÄ‚îÄ‚îê</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îú‚îÄ‚îÄ</span><span style="color:#C3E88D;"> api/v1/orders/index.js</span><span style="color:#C3E88D;">      ‚îú‚îÄ</span><span style="color:#C3E88D;"> REST</span><span style="color:#C3E88D;"> API</span></span>
<span class="line"><span style="color:#FFCB6B;"> ‚îî‚îÄ‚îÄ</span><span style="color:#C3E88D;"> api/v1/products/index.js</span><span style="color:#C3E88D;">  ‚îÄ‚îÄ‚îò</span></span></code></pre></div><p>...you could get your page routes to run off your REST API by re-routing your <code>next()</code> calls to consume the appropriate API route.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">server</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> ‚îú‚îÄ‚îÄ cart/index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">pathname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // Items to display in cart are in the &quot;/api/v1/orders&quot; route</span></span>
<span class="line"><span style="color:#C792EA;">    let</span><span style="color:#BABED8;"> cartItems</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">/api/v1/orders?user_id=1</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Your Cart</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ...</span><span style="color:#BABED8;">cartItems</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>This way, there is one source of truth for your application - both when visiting from a page and from a REST API.</p><h4 id="static-sites" tabindex="-1">Static Sites <a class="header-anchor" href="#static-sites" aria-label="Permalink to &quot;Static Sites&quot;">‚Äã</a></h4><p>You can build an entire static site from off the <code>/public</code> directory alone! It&#39;s all about placing files and HTML pages there to be served statically!</p><p>Here, static pages means pages that are not server-rendered during the request/response cycle, but served directly from files. You are free to hand-author each of them - either as standalone <code>index.html</code> files, or as a combination of <code>index.html</code> <em>roots</em> plus <em>templates</em> that can all get resolved client-side. The <a href="https://github.com/webqit/webflo/blob/master/README.md#pages-layout-and-templating" target="_blank" rel="noreferrer">Pages, Layout and Templating</a> section covers layout patterns.</p><p>On the other hand, if you have a dynamic site, you can make a static site off it! The idea is to turn on your server and crawl your dynamic site via HTTP requests, outputting static HTML representations of each page. This is called <em>Pre-Rendering</em> or <em>Static-Site Generation</em> (SSG)!</p><p>A simple tool, like <a href="https://github.com/tj/staticgen" target="_blank" rel="noreferrer"><code>staticgen</code></a>, or the basic <a href="https://www.gnu.org/software/wget/" target="_blank" rel="noreferrer"><code>wget</code></a> command (similar to <code>curl</code>), can get this done in an instant. On figuring out the command that works best for you, you may want to add an alias of the command to your npm scripts in <code>package.json</code>.</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">generate:site</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">wget -P public -nv -nH -r -E localhost:3000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><details><summary>How it works...</summary><blockquote><p>Above, we used the <code>-P</code> flag to specify the output directory as <code>public</code>, the <code>-nv</code> flag to opt into ‚Äúnon-verbose‚Äù mode which outputs less information, the <code>-r</code> flag to get it to crawl and download recursively, and the <code>-E</code> flag to get it to add the <code>.html</code> extension to generated files.</p></blockquote></details><p><em>Happy static!</em></p><h2 id="webflo-config" tabindex="-1">Webflo Config <a class="header-anchor" href="#webflo-config" aria-label="Permalink to &quot;Webflo Config&quot;">‚Äã</a></h2><p>Webflo comes <em>convention-first</em>! But it is entirely configurable for when you need it! The easiest way to do this is to run the command <code>webflo config</code> and follow the walkthrough. To simply get an overview, use the command <code>webflo config help</code>, and all commands and their description are shown.</p><h2 id="webflo-ecosystem" tabindex="-1">Webflo Ecosystem <a class="header-anchor" href="#webflo-ecosystem" aria-label="Permalink to &quot;Webflo Ecosystem&quot;">‚Äã</a></h2><p>Webflo applications are often built on/with the following technologies.</p><ul><li><a href="#oohtml">OOHTML</a></li><li><a href="#oohtml-ssr">OOHTML SSR</a></li><li><a href="#oohtml-cli">OOHTML CLI</a></li><li><a href="#the-observer-api">The Observer API</a></li></ul><h3 id="oohtml" tabindex="-1">OOHTML <a class="header-anchor" href="#oohtml" aria-label="Permalink to &quot;OOHTML&quot;">‚Äã</a></h3><p><a href="https://github.com/webqit/oohtml" target="_blank" rel="noreferrer">OOHTML</a> is a set of new features for HTML that makes it fun to hand-author your HTML documents! Within OOHTML are <a href="https://github.com/webqit/oohtml#html-modules" target="_blank" rel="noreferrer">HTML Modules</a> and <a href="https://github.com/webqit/oohtml#html-imports" target="_blank" rel="noreferrer">HTML Imports</a>, <a href="https://github.com/webqit/oohtml#subscript" target="_blank" rel="noreferrer">Reactive Scripts</a> and more!</p><h3 id="oohtml-ssr" tabindex="-1">OOHTML SSR <a class="header-anchor" href="#oohtml-ssr" aria-label="Permalink to &quot;OOHTML SSR&quot;">‚Äã</a></h3><p><a href="https://github.com/webqit/oohtml-ssr" target="_blank" rel="noreferrer">OOHTML SSR</a> is a server-side DOM implementation with native support for OOHTML. This is internally used by Webflo as the Server-Side Rendering engine, and it it what gives Webflo its native support for OOHTML.</p><h3 id="oohtml-cli" tabindex="-1">OOHTML CLI <a class="header-anchor" href="#oohtml-cli" aria-label="Permalink to &quot;OOHTML CLI&quot;">‚Äã</a></h3><p><a href="https://github.com/webqit/oohtml-cli" target="_blank" rel="noreferrer">OOHTML CLI</a> is a small Command Line utility that automates certain aspects of hand-authored OOHTML-based documents.</p><h3 id="the-observer-api" tabindex="-1">The Observer API <a class="header-anchor" href="#the-observer-api" aria-label="Permalink to &quot;The Observer API&quot;">‚Äã</a></h3><p><a href="https://github.com/webqit/observer" target="_blank" rel="noreferrer">The Observer API</a> is a simple set of functions for intercepting and observing JavaScript objects and arrays. (Reflection, Interception, and Events.)</p><p>This is part of OOHTML&#39;s reactivity system, and it is made available on OOHTML-based documents as <code>window.WebQit.Observer</code>.</p>`,290)])])}const d=a(o,[["render",t]]);export{D as __pageData,d as default};
