import{_ as a,c as t,o as s,a2 as o}from"./chunks/framework.9Uv4PgnO.js";const h=JSON.parse('{"title":"Request/Response Lifecycle","description":"","frontmatter":{},"headers":[],"relativePath":"docs/concepts/request-response.md","filePath":"docs/concepts/request-response.md"}'),n={name:"docs/concepts/request-response.md"};function l(r,e,i,c,p,d){return s(),t("div",null,[...e[0]||(e[0]=[o(`<h1 id="request-response-lifecycle" tabindex="-1">Request/Response Lifecycle <a class="header-anchor" href="#request-response-lifecycle" aria-label="Permalink to &quot;Request/Response Lifecycle&quot;">​</a></h1><p>This page explains how Webflo orchestrates each interaction from request to response, and how you can hook into various stages, including realtime.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><ol><li>A request is received and a route is resolved.</li><li>Matching handler(s) execute, optionally delegating via <code>next()</code> for nested routes.</li><li>A value is produced: data, <code>Response</code>, or <code>LiveResponse</code>.</li><li>The client renders data into the UI or consumes the response stream.</li><li>Optional realtime keeps the channel open for additional updates until closed.</li></ol><h2 id="the-httpevent" tabindex="-1">The HttpEvent <a class="header-anchor" href="#the-httpevent" aria-label="Permalink to &quot;The HttpEvent&quot;">​</a></h2><ul><li><code>event.request</code>, <code>event.url</code> — normalized request data.</li><li><code>event.cookies</code>, <code>event.session</code>, <code>event.user</code> — common state interfaces.</li><li><code>event.signal</code> — aborts when lifecycle completes or client aborts.</li><li><code>event.waitUntil(promise)</code> — extend lifecycle to await background work.</li><li><code>event.respondWith(value, optionsOrCallback)</code> — emit one or more responses.</li></ul><p>See also: <a href="/api/webflo-routing/HttpEvent">/api/webflo-routing/HttpEvent</a></p><h2 id="delegation-via-next" tabindex="-1">Delegation via next() <a class="header-anchor" href="#delegation-via-next" aria-label="Permalink to &quot;Delegation via next()&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#C792EA;"> async</span><span style="color:#C792EA;"> function</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">event</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> next</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">  if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">next</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">stepname</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#82AAFF;"> next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">  return</span><span style="color:#89DDFF;"> {</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Home</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> };</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="returning-values" tabindex="-1">Returning Values <a class="header-anchor" href="#returning-values" aria-label="Permalink to &quot;Returning Values&quot;">​</a></h2><ul><li>Single value: <code>return {...}</code> or <code>return Response.json({...})</code></li><li>Multiple/progressive values: call <code>event.respondWith(...)</code> one or more times</li><li>Generators or live functions can yield multiple values naturally</li></ul><p>See: <a href="/api/webflo-routing/handler">/api/webflo-routing/handler</a></p><h2 id="realtime" tabindex="-1">Realtime <a class="header-anchor" href="#realtime" aria-label="Permalink to &quot;Realtime&quot;">​</a></h2><p>Realtime extends the lifecycle beyond a single response so server and client can exchange multiple messages.</p><p>Close conditions:</p><ul><li>Handler finishes and no more messages are expected</li><li><code>HttpEvent.signal</code> aborts (client navigated away or server closed)</li></ul><p>See: <a href="/docs/concepts/realtime">/docs/concepts/realtime</a></p><h2 id="completion-and-abort" tabindex="-1">Completion and Abort <a class="header-anchor" href="#completion-and-abort" aria-label="Permalink to &quot;Completion and Abort&quot;">​</a></h2><ul><li>The root event aborts when all subtree handlers complete or the request aborts.</li><li>Child events inherit from the parent and abort when the parent aborts.</li></ul>`,19)])])}const v=a(n,[["render",l]]);export{h as __pageData,v as default};
